Perfecto. AquÃ­ tienes EL PROMPT COMPLETO, listo para copiar y pegar tal cual en Codex (o cualquier modelo de cÃ³digo).
EstÃ¡ escrito para que NO toque el hardware, NO cambie pines, NO rote la pantalla, y respete todo lo que ya funciona.

â¸»

ğŸ”¥ PROMPT PARA CODEX â€” PROYECTO SPECTRA

Contexto general
EstÃ¡s desarrollando el firmware final de un reproductor MP3 portÃ¡til DIY llamado SPECTRA, con estÃ©tica retrofuturista post-apocalÃ­ptica (ruinas, vegetaciÃ³n reclaiming tech, AI vieja pero viva).
El objetivo es un cÃ³digo estable de viaje, no experimental, que controle mÃºsica, UI y estado del sistema.

â¸»

ğŸ§  Microcontrolador
â€¢ESP32 NodeMCU
â€¢Arduino framework
â€¢NO usar WiFi ni Bluetooth interno del ESP32

â¸»

ğŸ–¥ï¸ Pantalla
â€¢Display circular GC9A01 240x240 SPI
â€¢Ya funciona correctamente
â€¢La imagen estÃ¡ invertida / rotada, PERO NO DEBE CAMBIARSE
â€¢Mantener exactamente la rotaciÃ³n actual (NO llamar setRotation() diferente)
â€¢No hay pin BLK (backlight siempre encendido)

Pines de la pantalla (NO CAMBIAR):
â€¢SCL / SCK â†’ GPIO 18
â€¢SDA / MOSI â†’ GPIO 23
â€¢DC â†’ GPIO 16
â€¢CS â†’ GPIO 17
â€¢RST â†’ GPIO 5
â€¢VCC â†’ 3.3V
â€¢GND â†’ GND

Usar Adafruit_GC9A01A o librerÃ­a equivalente estable.

â¸»

ğŸµ ReproducciÃ³n de audio
â€¢DFPlayer Mini
â€¢ComunicaciÃ³n por UART

Pines DFPlayer (NO CAMBIAR):
â€¢DF TX â†’ ESP32 GPIO 26
â€¢DF RX â†’ ESP32 GPIO 27 (con resistencia ~1k en serie idealmente)
â€¢VCC â†’ 5V
â€¢GND â†’ GND

Formato SD:

/mp3/0001.mp3
/mp3/0002.mp3
/mp3/0003.mp3
...

Nota: el DFPlayer NO puede leer nombres reales de canciones.
La UI debe mostrar TRACK 0001, TRACK 0002, etc.
(Los nombres â€œLatin Mafiaâ€ solo son conceptuales, no reales).

â¸»

ğŸ›ï¸ Controles

Botones touch (TTP223)
â€¢Salida HIGH cuando se tocan
â€¢Alimentados a 3.3V

AsignaciÃ³n:
â€¢GPIO 32 â†’ Play / Pause
â€¢GPIO 33 â†’ Next track
â€¢GPIO 25 â†’ Previous track

Botones mecÃ¡nicos (4 patas, usando 2)
â€¢Usar INPUT_PULLUP
â€¢Presionan a GND

AsignaciÃ³n:
â€¢GPIO 21 â†’ Volumen â€“
â€¢GPIO 22 â†’ Volumen +

â¸»

ğŸ”‹ BaterÃ­a
â€¢BaterÃ­a Li-ion 1S (3.0â€“4.2V)
â€¢MediciÃ³n por divisor resistivo (ej. 100k/100k)

ADC:
â€¢Nodo del divisor â†’ GPIO 35

Mostrar en pantalla:
â€¢Voltaje (ej. 3.87V)
â€¢Porcentaje aproximado
â€¢Indicador visual (barra o icono)
â€¢Colores:
â€¢Verde > 40%
â€¢Ãmbar 15â€“40%
â€¢Rojo < 15%

â¸»

ğŸ¨ UI / EstÃ©tica (MUY IMPORTANTE)

Estilo visual:
â€¢Retrofuturista
â€¢Post-apocalÃ­ptico
â€¢TecnologÃ­a vieja sobreviviendo
â€¢Colores:
â€¢Negro dominante
â€¢Verde fÃ³sforo / cian
â€¢Ãmbar / naranja para alertas
â€¢Gris oscuro para estructuras

Elementos grÃ¡ficos deseados:
â€¢Rejillas
â€¢CÃ­rculos concÃ©ntricos
â€¢Marcos tÃ©cnicos
â€¢â€œRuidoâ€ visual leve (scanlines, glitches sutiles)
â€¢Texto tipo sistema antiguo / AI

Texto conceptual permitido:
â€¢â€œSPECTRAâ€
â€¢â€œSYSTEM ONLINEâ€
â€¢â€œAUDIO CORE ACTIVEâ€
â€¢â€œRUINS MODEâ€
â€¢â€œFIELD UNITâ€

(NO usar referencias reales a agencias, gobiernos, etc.)

â¸»

ğŸ“º InformaciÃ³n a mostrar en pantalla
â€¢TRACK actual (0001, 0002â€¦)
â€¢Estado: PLAY / PAUSE
â€¢Barra de volumen
â€¢Indicador de baterÃ­a
â€¢AnimaciÃ³n leve cuando:
â€¢Cambia canciÃ³n
â€¢Se pausa / reproduce
â€¢Se presiona botÃ³n

â¸»

âš™ï¸ Comportamiento del sistema
â€¢Al encender:
â€¢Inicializa pantalla
â€¢Inicializa DFPlayer
â€¢Empieza en TRACK 0001
â€¢Botones deben tener debounce por software
â€¢CÃ³digo modular y claro
â€¢Priorizar estabilidad sobre efectos

â¸»

ğŸš« Restricciones IMPORTANTES
â€¢âŒ NO cambiar pines
â€¢âŒ NO cambiar rotaciÃ³n de pantalla
â€¢âŒ NO usar WiFi / Bluetooth interno
â€¢âŒ NO usar delays largos que congelen la UI
â€¢âŒ NO asumir que el DFPlayer devuelve nombres de canciones

â¸»

âœ… Objetivo final

Generar UN SOLO SKETCH COMPLETO, listo para subir, que:
â€¢Controle todo el sistema
â€¢Tenga una UI coherente y estÃ©tica
â€¢Sea estable para uso prolongado (viaje)
â€¢Se sienta como un dispositivo real, no un prototipo

â¸»

Si quieres, despuÃ©s puedo ayudarte a:
â€¢Revisar el cÃ³digo que te dÃ© Codex
â€¢Optimizar FPS / consumo
â€¢Ajustar la UI sin tocar hardware
â€¢Preparar SPECTRA v2 con Bluetooth integrado

Pero este prompt ya es nivel ingenierÃ­a real.
CÃ³pielo tal cual y mÃ¡ndalo ğŸš€
